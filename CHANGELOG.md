# Changelog

В этом файле документируются все значимые изменения, вносимые в проект.
Формат основан на [Keep a Changelog](https://keepachangelog.com/en/1.0.0/).

## [1.0.0] - 2025-09-04

Эта версия представляет собой первый стабильный релиз после масштабного рефакторинга и внедрения нового функционала. Система готова к развертыванию на production-сервере.

### Added (Добавлено)

-   **Интеграция с Microsoft Graph API:**
    -   Добавлен сервис `graph_service.py` для аутентификации в Azure AD и скачивания файлов из OneDrive.
    -   Добавлен сервис `document_service.py` для генерации Word-документов по шаблону.
    -   В админ-панель добавлена страница для генерации отчетов из облачного Excel-файла.
-   **Расширение модели данных:**
    -   В модель `Part` добавлены новые обязательные поля: `name` (Наименование) и `material` (Материал), а также опциональное поле `size` (Размер).
-   **Улучшенный импорт:**
    -   Функция импорта из Excel/CSV (`part_service.py`) полностью переписана для поддержки иерархических файлов (изделие -> детали).
    -   Реализовано автоматическое создание технологических маршрутов и этапов на лету во время импорта, если они не существуют.
-   **WebSocket-уведомления:**
    -   Реализована система всплывающих "тост"-уведомлений в реальном времени для всех пользователей о ключевых событиях: создание/изменение деталей, смена ответственного, завершение этапа.
-   **Автоматическое тестирование:**
    -   Добавлены новые файлы тестов `tests/test_services.py` и `tests/test_part_service.py` для покрытия нового функционала.
    -   Существующие тесты обновлены для работы с новой структурой данных.
-   **Документация:**
    -   Создан данный файл `CHANGELOG.md`.
    -   Создан шаблон `.env.example` для упрощения настройки окружения.

### Changed (Изменено)

-   **Production-сервер:**
    -   Проект переведен с `Waitress` на `Gunicorn + eventlet` для полноценной поддержки WebSocket в production-режиме.
    -   Обновлен `docker-compose.prod.yml` для запуска через Gunicorn.
-   **Качество кода:**
    -   Весь Python-код отформатирован в соответствии со стандартом PEP 8.
    -   Улучшена система логирования: уровень логирования вынесен в `.env`, в логи ошибок добавлен полный traceback.
-   **Пользовательский интерфейс:**
    -   Обновлены все формы и шаблоны для работы с новыми полями (`material`, `name`, `size`).
    -   Шаблон для печати QR-кодов (`qr_print_preview.html`) переписан с использованием Tailwind CSS.
-   **Документация:**
    -   Файл `README.md` полностью переработан для отражения актуального стека и процесса развертывания.

### Removed (Удалено)

-   **"Мертвый код":**
    -   Удален устаревший и неиспользуемый шаблон `app/templates/reports_index.html`.
    -   Код очищен от неиспользуемых импортов и устаревших комментариев.
-   **"Голые" стили:**
    -   Устранены все встроенные CSS-стили (атрибуты `style="..."` и теги `<style>`) из HTML-шаблонов в пользу Tailwind CSS.